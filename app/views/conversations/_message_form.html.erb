<%= form_with url: messages_path, method: :post, data: { turbo: true, 'messages-target': 'form' }, html: { 'aria-label': t('conversations.form.aria_write_message') } do |f| %>
  <%= hidden_field_tag :conversation_id, @conversation.id if @conversation %>
  <span></span>
  <select id="chat_mode_select" name="chat_mode" aria-label="<%= t('conversations.form.chat_mode') %>">
    <% Model.all.each do |model| %>
      <option value="<%= model.model_id %>" <%= 'selected' if @chat_mode == model.model_id %>><%= model.name.titleize %></option>
    <% end %>
  </select>

  <%= f.text_field :message, value: @message, placeholder: t('conversations.form.message_placeholder'),
                  'aria-label': t('conversations.form.aria_write_message'), autocomplete: 'off',
                  data: { 'messages-target': 'input' },
                  enterkeyhint: 'send' %>

  <%= f.button t('conversations.form.send'), type: 'submit', 'aria-label': t('conversations.form.send'),
                data: { 'messages-target': 'sendButton' }  %>
<% end %>
